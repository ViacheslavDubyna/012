# Installation and Launch Guide for the National Guard of Ukraine Information and Analytical System

This guide provides detailed instructions for installing and launching the Information and Analytical System of the National Guard of Ukraine.

## Table of Contents

1. [System Requirements](#system-requirements)
2. [Installing PostgreSQL](#installing-postgresql)
3. [Installing Python and Dependencies](#installing-python-and-dependencies)
4. [System Configuration](#system-configuration)
5. [Launching the System](#launching-the-system)
6. [Troubleshooting](#troubleshooting)

## System Requirements

### Minimum Requirements

- Operating System: Windows 10/11, Linux (Ubuntu 20.04 or newer), macOS 10.15 or newer
- Processor: 2 cores, 2 GHz
- RAM: 4 GB
- Free disk space: 2 GB
- Internet connection

### Recommended Requirements

- Processor: 4 cores, 3 GHz
- RAM: 8 GB
- Free disk space: 5 GB

### Software

- Python 3.8 or higher
- PostgreSQL 12 or higher
- Modern web browser (Google Chrome, Mozilla Firefox, Microsoft Edge)

## Installing PostgreSQL

### Windows

1. Download the PostgreSQL installer from the official website: https://www.postgresql.org/download/windows/
2. Run the installer and follow the instructions:
   - Select components to install (PostgreSQL Server, pgAdmin, Command Line Tools)
   - Specify the installation directory
   - Set a password for the `postgres` user (remember it!)
   - Specify the port (default is 5432)
   - Select locale
3. After installation, make sure the PostgreSQL service is running:
   - Open "Services" through Control Panel or run `services.msc`
   - Find the PostgreSQL service and make sure it's running

### Linux (Ubuntu)

1. Update the package index:
   ```bash
   sudo apt update
   ```

2. Install PostgreSQL:
   ```bash
   sudo apt install postgresql postgresql-contrib
   ```

3. Check the service status:
   ```bash
   sudo systemctl status postgresql
   ```

4. If the service is not running, start it:
   ```bash
   sudo systemctl start postgresql
   ```

5. Set a password for the `postgres` user:
   ```bash
   sudo -u postgres psql -c "ALTER USER postgres WITH PASSWORD 'postgres';"
   ```

### macOS

1. Install Homebrew if it's not already installed:
   ```bash
   /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
   ```

2. Install PostgreSQL:
   ```bash
   brew install postgresql
   ```

3. Start PostgreSQL:
   ```bash
   brew services start postgresql
   ```

4. Set a password for the `postgres` user:
   ```bash
   psql postgres -c "ALTER USER postgres WITH PASSWORD 'postgres';"
   ```

## Installing Python and Dependencies

### Windows

1. Download the Python installer from the official website: https://www.python.org/downloads/
2. Run the installer and follow the instructions:
   - Check the option "Add Python to PATH"
   - Select "Install Now"
3. Verify the Python installation by opening a command prompt and running:
   ```bash
   python --version
   ```

### Linux (Ubuntu)

1. Install Python and pip:
   ```bash
   sudo apt install python3 python3-pip
   ```

2. Verify the installation:
   ```bash
   python3 --version
   pip3 --version
   ```

### macOS

1. Install Python using Homebrew:
   ```bash
   brew install python
   ```

2. Verify the installation:
   ```bash
   python3 --version
   pip3 --version
   ```

## System Configuration

1. Clone or unpack the system archive to a convenient directory.

2. Open a command prompt or terminal and navigate to the system directory:
   ```bash
   cd path/to/directory/ias_military
   ```

3. Install the required dependencies:
   ```bash
   pip install -r requirements.txt
   ```

4. Open the `config/config.py` file and check the database settings:
   ```python
   DB_CONFIG = {
       'user': 'postgres',
       'password': 'postgres',  # Change to your password if it's different
       'host': 'localhost',
       'port': '5432',
       'database': 'ngu_ias'
   }
   ```

   Change the `'password'` value to the password you set for the `postgres` user during PostgreSQL installation.

## Launching the System

### Full System Launch

To fully launch the system (PostgreSQL setup, database initialization, test data seeding, and web interface launch), run the command:

```bash
python start_system.py
```

The system will automatically perform all necessary steps and open the web interface in your browser.

### Launch with Additional Options

You can use additional options to skip certain launch stages:

- `--skip-db-setup` - skip PostgreSQL setup
- `--skip-db-init` - skip database initialization
- `--skip-db-seed` - skip test data seeding

For example, if you have already set up the database and only want to launch the web interface:

```bash
python start_system.py --skip-db-setup --skip-db-init --skip-db-seed
```

### Launching Individual Components

If you need to launch only specific system components, you can use the following commands:

1. PostgreSQL setup:
   ```bash
   python setup_postgres.py
   ```

2. Database initialization:
   ```bash
   python run.py init_db
   ```

3. Test data seeding:
   ```bash
   python run.py seed_db
   ```

4. Web interface launch:
   ```bash
   python run.py
   ```

## Усунення можливих проблем

### PostgreSQL не запускається

1. Перевірте, чи встановлено PostgreSQL:
   - Windows: Перевірте наявність служби PostgreSQL у списку служб
   - Linux: `sudo systemctl status postgresql`
   - macOS: `brew services list | grep postgresql`

2. Перевірте, чи запущена служба PostgreSQL:
   - Windows: Запустіть службу через "Служби" (Services)
   - Linux: `sudo systemctl start postgresql`
   - macOS: `brew services start postgresql`

3. Перевірте налаштування брандмауера:
   - Переконайтеся, що порт 5432 відкритий для локальних підключень

### Помилка підключення до бази даних

1. Перевірте налаштування у файлі `config/config.py`:
   - Перевірте правильність імені користувача, пароля, хоста та порту

2. Перевірте, чи існує база даних `ngu_ias`:
   - Підключіться до PostgreSQL: `psql -U postgres`
   - Перегляньте список баз даних: `\l`

3. Якщо база даних не існує, створіть її вручну:
   - `CREATE DATABASE ngu_ias;`

4. Якщо виникає помилка "password authentication failed for user postgres", змініть пароль:
   - Windows: Відкрийте pgAdmin, підключіться до сервера, змініть пароль користувача postgres
   - Linux/macOS: `sudo -u postgres psql -c "ALTER USER postgres WITH PASSWORD 'postgres';"`

### Помилка встановлення залежностей

1. Оновіть pip до останньої версії:
   ```bash
   python -m pip install --upgrade pip
   ```

2. Встановіть залежності по одній, щоб визначити проблемний пакет:
   ```bash
   pip install flask==2.3.3
   pip install sqlalchemy==2.0.23
   pip install dash==2.14.0
   # і т.д.
   ```

3. Для Windows може знадобитися встановлення компілятора C++:
   - Завантажте та встановіть Microsoft C++ Build Tools: https://visualstudio.microsoft.com/visual-cpp-build-tools/

### Веб-інтерфейс не відкривається

1. Перевірте, чи запущений веб-сервер:
   - У консолі має бути повідомлення про запуск сервера

2. Перевірте адресу в браузері:
   - За замовчуванням: http://localhost:5000

3. Перевірте, чи не блокує брандмауер порт 5000:
   - Тимчасово вимкніть брандмауер або додайте виняток для порту 5000

4. Спробуйте використати інший браузер

### Помилки інтеграції Dash з Flask

1. Якщо дашборд не відображається або відображається некоректно:
   - Перевірте, чи встановлено всі необхідні пакети: `dash`, `dash-core-components`, `dash-html-components`
   - Переконайтеся, що URL-адреса дашборду правильна: http://localhost:5000/dashboard/improved

2. Якщо виникає помилка "No such file or directory" при завантаженні GeoJSON:
   - Перевірте наявність файлу GeoJSON у вказаному шляху
   - Використовуйте абсолютні шляхи замість відносних

3. Якщо виникає помилка "ModuleNotFoundError: No module named 'dash'":
   - Встановіть пакет dash: `pip install dash==2.14.0`

### Інші проблеми

Якщо виникають інші проблеми, спробуйте:

1. Перезапустити систему з чистою базою даних:
   ```bash
   python start_system.py
   ```

2. Перевірити журнали помилок у консолі

3. Запустити систему з використанням спрощеного скрипта:
   ```bash
   python start_system_easy.py
   ```

4. Зв'язатися з розробниками системи з детальним описом проблеми та кроками для її відтворення